<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <meta name="author" content="MRC Centre for Global Infectious Disease Analysis">
  <title>orderly, the tutorial – Orderly Tutorial</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Orderly Tutorial</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
MRC Centre for Global Infectious Disease Analysis 
</div>
</div>
</div>

</section>
<section>
<section id="what-is-orderly" class="title-slide slide level1 center">
<h1>What is orderly?</h1>
<div>
<ul>
<li class="fragment">A reproducible reporting framework</li>
<li class="fragment">A way of keeping track of versions of data</li>
<li class="fragment">A way of collaborating with other people</li>
<li class="fragment">A way of thinking about analysis</li>
</ul>
</div>
</section>
<section id="original-aims" class="slide level2">
<h2>Original aims:</h2>
<blockquote>
<p>“With orderly we have two main hopes:</p>
<ul>
<li>analysts can write code that will straightforwardly run on someone else’s machine (or a remote machine)</li>
<li>when an analysis that is run several times starts behaving differently it will be easy to see when the outputs started changing, and what inputs started changing at the same time”</li>
</ul>
</blockquote>
<p>(~ 2018)</p>
<aside class="notes">
<p>orderly requires a few conventions around organisation of a project, and after that tries to keep out of your way. However, these requirements are designed to make collaborative development with git easier by minimising conflicts and making backup easier by using an append-only storage system.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="but-what-is-it" class="slide level2 smaller">
<h2>But what is it?</h2>
<ul>
<li>A <a href="https://mrc-ide.github.io/orderly2">package</a> designed to make analysis more reproducible</li>
<li>A way of structuring your analysis so to make it easy to understand, run and reuse</li>
<li>A set of tools that make it easy to:
<ul>
<li>track all <strong>inputs</strong> into an analysis (packages, code, and data resources)</li>
<li>store multiple <strong>versions</strong> of an analysis where it is repeated</li>
<li>track <strong>outputs</strong> of an analysis</li>
<li>create analyses that <strong>depend</strong> on the outputs of previous analyses</li>
</ul></li>
</ul>
</section>
<section id="who-uses-it" class="slide level2">
<h2>Who uses it?</h2>
<ul>
<li>Developed since May 2017 for the <a href="https://www.vaccineimpact.org/">Vaccine Impact Modelling Consortium</a></li>
<li>Used in the 2018-2020 DRC Ebola responses</li>
<li>Used in the COVID-19 response, especially within the “real time modelling” group</li>
<li>Used within research groups (HIV, Malaria, possibly others?)</li>
</ul>
</section>
<section id="historical-notes" class="slide level2 smaller">
<h2>Historical notes</h2>
<ul>
<li><a href="https://vimc.github.io/orderly"><code>orderly</code></a> (version 1)
<ul>
<li>Created for <a href="https://www.vaccineimpact.org/">Vaccine Impact Modelling Consortium</a> and strongly focussed on <strong>reproducible research</strong></li>
<li>Used <a href="https://en.wikipedia.org/wiki/YAML">YAML</a> everywhere</li>
<li>Supported simple ways of working for a small centralised team</li>
</ul></li>
<li><a href="https://mrc-ide.github.io/orderly2"><code>orderly2</code></a> (soon to be <code>orderly</code> 2.0.0)
<ul>
<li>A complete rewrite taking the best ideas from version 1 and dropping many less useful bits</li>
<li>Easier to program against</li>
<li>No more YAML</li>
<li>Focusses on <strong>distributed collaborative analysis</strong></li>
<li>Also available as a <a href="https://pypi.org/project/pyorderly/">python package</a>!</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="part-1-getting-started" class="title-slide slide level1 center" data-background="#43464B">
<h1>Part 1: Getting started</h1>

</section>
<section id="install-orderly2" class="slide level2">
<h2>Install <code>orderly2</code></h2>
<p>From the mrc-ide <a href="https://mrc-ide.r-universe.dev">r-universe</a> (recommended)</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">install.packages</span>(</span>
<span id="cb1-2"><a></a>  <span class="st">"orderly2"</span>,</span>
<span id="cb1-3"><a></a>  <span class="at">repos =</span> <span class="fu">c</span>(<span class="st">"https://mrc-ide.r-universe.dev"</span>,</span>
<span id="cb1-4"><a></a>            <span class="st">"https://cloud.r-project.org"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>From GitHub using <code>remotes</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"mrc-ide/orderly2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>From PyPi (for Python)</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>pip install pyorderly</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="my-first-orderly-report-task" class="slide level2">
<h2>My first orderly report / task</h2>
<div class="fragment">
<p>There is a discussion to have here about naming. We might have this in a break…</p>
</div>
</section>
<section id="the-setup" class="slide level2">
<h2>The setup</h2>
<p>First, load the package and create a new empty orderly root.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">library</span>(orderly2)</span>
<span id="cb4-2"><a></a><span class="fu">orderly_init</span>(<span class="st">"workdir/part1"</span>)</span>
<span id="cb4-3"><a></a><span class="do">## ✔ Created orderly root at '/home/runner/work/orderly-tutorial/orderly-tutorial/workdir/part1'</span></span>
<span id="cb4-4"><a></a><span class="do">## ✔ Wrote '.gitignore'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>(for the rest of this section, we have <code>setwd()</code> into this directory; you should create an RStudio “Project” here.)</p>
</section>
<section id="whats-in-the-box" class="slide level2">
<h2>What’s in the box?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>fs<span class="sc">::</span><span class="fu">dir_tree</span>(<span class="st">"workdir/part1"</span>)</span>
<span id="cb5-2"><a></a><span class="do">## workdir/part1</span></span>
<span id="cb5-3"><a></a><span class="do">## └── orderly_config.yml</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Really:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>fs<span class="sc">::</span><span class="fu">dir_tree</span>(<span class="st">"workdir/part1"</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-2"><a></a><span class="do">## workdir/part1</span></span>
<span id="cb6-3"><a></a><span class="do">## ├── .gitignore</span></span>
<span id="cb6-4"><a></a><span class="do">## ├── .outpack</span></span>
<span id="cb6-5"><a></a><span class="do">## │   ├── config.json</span></span>
<span id="cb6-6"><a></a><span class="do">## │   ├── location</span></span>
<span id="cb6-7"><a></a><span class="do">## │   ├── metadata</span></span>
<span id="cb6-8"><a></a><span class="do">## │   └── r</span></span>
<span id="cb6-9"><a></a><span class="do">## │       └── git_ok</span></span>
<span id="cb6-10"><a></a><span class="do">## └── orderly_config.yml</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>But leave everything in <code>.outpack/</code> alone, just like <code>.git/</code></p>
</div>
</section>
<section id="create-an-empty-report" class="slide level2">
<h2>Create an empty report</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="fu">orderly_new</span>(<span class="st">"example"</span>)</span>
<span id="cb7-2"><a></a><span class="do">## ✔ Created 'src/example/example.R'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Our contents now:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>fs<span class="sc">::</span><span class="fu">dir_tree</span>(<span class="st">"workdir/part1"</span>)</span>
<span id="cb8-2"><a></a><span class="do">## workdir/part1</span></span>
<span id="cb8-3"><a></a><span class="do">## ├── orderly_config.yml</span></span>
<span id="cb8-4"><a></a><span class="do">## └── src</span></span>
<span id="cb8-5"><a></a><span class="do">##     └── example</span></span>
<span id="cb8-6"><a></a><span class="do">##         └── example.R</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The name <code>example.R</code> is important; this always has the form <code>src/&lt;name&gt;/name.R</code></p>
</div>
</section>
<section id="hello-orderly-world" class="slide level2">
<h2>Hello orderly world</h2>
<p>We have edited <code>src/example/example.R</code> to contain:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>d <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">greeting =</span> <span class="st">"hello"</span>, <span class="at">to =</span> <span class="st">"world"</span>)</span>
<span id="cb9-2"><a></a><span class="fu">write.csv</span>(d, <span class="st">"hello.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now we run</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>id <span class="ot">&lt;-</span> <span class="fu">orderly_run</span>(<span class="st">"example"</span>)</span>
<span id="cb10-2"><a></a><span class="do">## ℹ Starting packet 'example' `20241023-074719-5042592d` at 2024-10-23 07:47:19.325677</span></span>
<span id="cb10-3"><a></a><span class="do">## &gt; d &lt;- data.frame(greeting = "hello", to = "world")</span></span>
<span id="cb10-4"><a></a><span class="do">## &gt; write.csv(d, "hello.csv", row.names = FALSE)</span></span>
<span id="cb10-5"><a></a><span class="do">## ✔ Finished running 'example.R'</span></span>
<span id="cb10-6"><a></a><span class="do">## ℹ Finished 20241023-074719-5042592d at 2024-10-23 07:47:19.377219 (0.05154157 secs)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="files-created" class="slide level2 smaller">
<h2>Files created</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>fs<span class="sc">::</span><span class="fu">dir_tree</span>(<span class="st">"workdir/part1"</span>)</span>
<span id="cb11-2"><a></a><span class="do">## workdir/part1</span></span>
<span id="cb11-3"><a></a><span class="do">## ├── archive</span></span>
<span id="cb11-4"><a></a><span class="do">## │   └── example</span></span>
<span id="cb11-5"><a></a><span class="do">## │       └── 20241023-074719-5042592d</span></span>
<span id="cb11-6"><a></a><span class="do">## │           ├── example.R</span></span>
<span id="cb11-7"><a></a><span class="do">## │           └── hello.csv</span></span>
<span id="cb11-8"><a></a><span class="do">## ├── draft</span></span>
<span id="cb11-9"><a></a><span class="do">## │   └── example</span></span>
<span id="cb11-10"><a></a><span class="do">## ├── orderly_config.yml</span></span>
<span id="cb11-11"><a></a><span class="do">## └── src</span></span>
<span id="cb11-12"><a></a><span class="do">##     └── example</span></span>
<span id="cb11-13"><a></a><span class="do">##         └── example.R</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Directory named after the id (in <code>archive/example</code>)</li>
<li>We have copied <code>example.R</code> into the directory</li>
<li>Output sits next to inputs</li>
<li>Metadata is stored in a hidden location</li>
</ul>
<p>Contents of <code>hello.csv</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a><span class="fu">read.csv</span>(<span class="fu">file.path</span>(<span class="st">"workdir/part1/archive/example"</span>, id, <span class="st">"hello.csv"</span>))</span>
<span id="cb12-2"><a></a><span class="do">##   greeting    to</span></span>
<span id="cb12-3"><a></a><span class="do">## 1    hello world</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="every-packet-has-a-unique-id" class="slide level2 smaller">
<h2>Every packet has a unique id</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>id</span>
<span id="cb13-2"><a></a><span class="do">## [1] "20241023-074719-5042592d"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>and a bunch of metadata:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a><span class="fu">orderly_metadata</span>(id)</span>
<span id="cb14-2"><a></a><span class="do">## $schema_version</span></span>
<span id="cb14-3"><a></a><span class="do">## [1] "0.1.1"</span></span>
<span id="cb14-4"><a></a><span class="do">## </span></span>
<span id="cb14-5"><a></a><span class="do">## $name</span></span>
<span id="cb14-6"><a></a><span class="do">## [1] "example"</span></span>
<span id="cb14-7"><a></a><span class="do">## </span></span>
<span id="cb14-8"><a></a><span class="do">## $id</span></span>
<span id="cb14-9"><a></a><span class="do">## [1] "20241023-074719-5042592d"</span></span>
<span id="cb14-10"><a></a><span class="do">## </span></span>
<span id="cb14-11"><a></a><span class="do">## $time</span></span>
<span id="cb14-12"><a></a><span class="do">## $time$start</span></span>
<span id="cb14-13"><a></a><span class="do">## [1] "2024-10-23 07:47:19 UTC"</span></span>
<span id="cb14-14"><a></a><span class="do">## </span></span>
<span id="cb14-15"><a></a><span class="do">## $time$end</span></span>
<span id="cb14-16"><a></a><span class="do">## [1] "2024-10-23 07:47:19 UTC"</span></span>
<span id="cb14-17"><a></a><span class="do">## </span></span>
<span id="cb14-18"><a></a><span class="do">## </span></span>
<span id="cb14-19"><a></a><span class="do">## $parameters</span></span>
<span id="cb14-20"><a></a><span class="do">## NULL</span></span>
<span id="cb14-21"><a></a><span class="do">## </span></span>
<span id="cb14-22"><a></a><span class="do">## $files</span></span>
<span id="cb14-23"><a></a><span class="do">##        path size</span></span>
<span id="cb14-24"><a></a><span class="do">## 1 example.R   95</span></span>
<span id="cb14-25"><a></a><span class="do">## 2 hello.csv   32</span></span>
<span id="cb14-26"><a></a><span class="do">##                                                                      hash</span></span>
<span id="cb14-27"><a></a><span class="do">## 1 sha256:541682d8b8dba9b2ddb4ac5809c03e6bedd58b52ab3e64a662f3f48e66a9639f</span></span>
<span id="cb14-28"><a></a><span class="do">## 2 sha256:b9f0704f459f7ad9785ddee01a281d81f95a461dbb682436a263e0b7252e92b7</span></span>
<span id="cb14-29"><a></a><span class="do">## </span></span>
<span id="cb14-30"><a></a><span class="do">## $depends</span></span>
<span id="cb14-31"><a></a><span class="do">## [1] packet query  files </span></span>
<span id="cb14-32"><a></a><span class="do">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span id="cb14-33"><a></a><span class="do">## </span></span>
<span id="cb14-34"><a></a><span class="do">## $git</span></span>
<span id="cb14-35"><a></a><span class="do">## $git$sha</span></span>
<span id="cb14-36"><a></a><span class="do">## [1] "c6f469f362fd925206fad90a6749d5f9beaa6f02"</span></span>
<span id="cb14-37"><a></a><span class="do">## </span></span>
<span id="cb14-38"><a></a><span class="do">## $git$branch</span></span>
<span id="cb14-39"><a></a><span class="do">## [1] "main"</span></span>
<span id="cb14-40"><a></a><span class="do">## </span></span>
<span id="cb14-41"><a></a><span class="do">## $git$url</span></span>
<span id="cb14-42"><a></a><span class="do">## [1] "https://github.com/mrc-ide/orderly-tutorial"</span></span>
<span id="cb14-43"><a></a><span class="do">## </span></span>
<span id="cb14-44"><a></a><span class="do">## </span></span>
<span id="cb14-45"><a></a><span class="do">## $custom</span></span>
<span id="cb14-46"><a></a><span class="do">## $custom$orderly</span></span>
<span id="cb14-47"><a></a><span class="do">## $custom$orderly$artefacts</span></span>
<span id="cb14-48"><a></a><span class="do">## [1] description paths      </span></span>
<span id="cb14-49"><a></a><span class="do">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span id="cb14-50"><a></a><span class="do">## </span></span>
<span id="cb14-51"><a></a><span class="do">## $custom$orderly$role</span></span>
<span id="cb14-52"><a></a><span class="do">##        path    role</span></span>
<span id="cb14-53"><a></a><span class="do">## 1 example.R orderly</span></span>
<span id="cb14-54"><a></a><span class="do">## </span></span>
<span id="cb14-55"><a></a><span class="do">## $custom$orderly$description</span></span>
<span id="cb14-56"><a></a><span class="do">## $custom$orderly$description$display</span></span>
<span id="cb14-57"><a></a><span class="do">## NULL</span></span>
<span id="cb14-58"><a></a><span class="do">## </span></span>
<span id="cb14-59"><a></a><span class="do">## $custom$orderly$description$long</span></span>
<span id="cb14-60"><a></a><span class="do">## NULL</span></span>
<span id="cb14-61"><a></a><span class="do">## </span></span>
<span id="cb14-62"><a></a><span class="do">## $custom$orderly$description$custom</span></span>
<span id="cb14-63"><a></a><span class="do">## NULL</span></span>
<span id="cb14-64"><a></a><span class="do">## </span></span>
<span id="cb14-65"><a></a><span class="do">## </span></span>
<span id="cb14-66"><a></a><span class="do">## $custom$orderly$shared</span></span>
<span id="cb14-67"><a></a><span class="do">## [1] here  there</span></span>
<span id="cb14-68"><a></a><span class="do">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span id="cb14-69"><a></a><span class="do">## </span></span>
<span id="cb14-70"><a></a><span class="do">## $custom$orderly$session</span></span>
<span id="cb14-71"><a></a><span class="do">## $custom$orderly$session$platform</span></span>
<span id="cb14-72"><a></a><span class="do">## $custom$orderly$session$platform$version</span></span>
<span id="cb14-73"><a></a><span class="do">## [1] "R version 4.4.1 (2024-06-14)"</span></span>
<span id="cb14-74"><a></a><span class="do">## </span></span>
<span id="cb14-75"><a></a><span class="do">## $custom$orderly$session$platform$os</span></span>
<span id="cb14-76"><a></a><span class="do">## [1] "Ubuntu 22.04.5 LTS"</span></span>
<span id="cb14-77"><a></a><span class="do">## </span></span>
<span id="cb14-78"><a></a><span class="do">## $custom$orderly$session$platform$system</span></span>
<span id="cb14-79"><a></a><span class="do">## [1] "x86_64, linux-gnu"</span></span>
<span id="cb14-80"><a></a><span class="do">## </span></span>
<span id="cb14-81"><a></a><span class="do">## </span></span>
<span id="cb14-82"><a></a><span class="do">## $custom$orderly$session$packages</span></span>
<span id="cb14-83"><a></a><span class="do">##        package version attached</span></span>
<span id="cb14-84"><a></a><span class="do">## 1     orderly2 1.99.48     TRUE</span></span>
<span id="cb14-85"><a></a><span class="do">## 2        vctrs   0.6.5    FALSE</span></span>
<span id="cb14-86"><a></a><span class="do">## 3          cli   3.6.3    FALSE</span></span>
<span id="cb14-87"><a></a><span class="do">## 4        knitr    1.48    FALSE</span></span>
<span id="cb14-88"><a></a><span class="do">## 5        rlang   1.1.4    FALSE</span></span>
<span id="cb14-89"><a></a><span class="do">## 6         xfun    0.48    FALSE</span></span>
<span id="cb14-90"><a></a><span class="do">## 7     jsonlite   1.8.9    FALSE</span></span>
<span id="cb14-91"><a></a><span class="do">## 8         glue   1.8.0    FALSE</span></span>
<span id="cb14-92"><a></a><span class="do">## 9      openssl   2.2.2    FALSE</span></span>
<span id="cb14-93"><a></a><span class="do">## 10     askpass   1.2.1    FALSE</span></span>
<span id="cb14-94"><a></a><span class="do">## 11   htmltools 0.5.8.1    FALSE</span></span>
<span id="cb14-95"><a></a><span class="do">## 12         sys   3.4.3    FALSE</span></span>
<span id="cb14-96"><a></a><span class="do">## 13       fansi   1.0.6    FALSE</span></span>
<span id="cb14-97"><a></a><span class="do">## 14   rmarkdown    2.28    FALSE</span></span>
<span id="cb14-98"><a></a><span class="do">## 15    evaluate   1.0.1    FALSE</span></span>
<span id="cb14-99"><a></a><span class="do">## 16      tibble   3.2.1    FALSE</span></span>
<span id="cb14-100"><a></a><span class="do">## 17     fastmap   1.2.0    FALSE</span></span>
<span id="cb14-101"><a></a><span class="do">## 18        yaml  2.3.10    FALSE</span></span>
<span id="cb14-102"><a></a><span class="do">## 19   lifecycle   1.0.4    FALSE</span></span>
<span id="cb14-103"><a></a><span class="do">## 20    compiler   4.4.1    FALSE</span></span>
<span id="cb14-104"><a></a><span class="do">## 21          fs   1.6.4    FALSE</span></span>
<span id="cb14-105"><a></a><span class="do">## 22   pkgconfig   2.0.3    FALSE</span></span>
<span id="cb14-106"><a></a><span class="do">## 23      digest  0.6.37    FALSE</span></span>
<span id="cb14-107"><a></a><span class="do">## 24        gert   2.1.4    FALSE</span></span>
<span id="cb14-108"><a></a><span class="do">## 25          R6   2.5.1    FALSE</span></span>
<span id="cb14-109"><a></a><span class="do">## 26        utf8   1.2.4    FALSE</span></span>
<span id="cb14-110"><a></a><span class="do">## 27      pillar   1.9.0    FALSE</span></span>
<span id="cb14-111"><a></a><span class="do">## 28 credentials   2.0.2    FALSE</span></span>
<span id="cb14-112"><a></a><span class="do">## 29    magrittr   2.0.3    FALSE</span></span>
<span id="cb14-113"><a></a><span class="do">## 30       withr   3.0.1    FALSE</span></span>
<span id="cb14-114"><a></a><span class="do">## 31       tools   4.4.1    FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="what-is-a-hash" class="slide level2">
<h2>What is a hash?</h2>
<p>A one-way transformation from data to a fairly short string</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="fu">orderly_hash_data</span>(<span class="st">"hello"</span>, <span class="st">"sha256"</span>)</span>
<span id="cb15-2"><a></a><span class="do">## [1] "sha256:2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Very small changes to the string give large changes to the hash</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="fu">orderly_hash_data</span>(<span class="st">"hel1o"</span>, <span class="st">"sha256"</span>)</span>
<span id="cb16-2"><a></a><span class="do">## [1] "sha256:28ad6a376c5c22d1a3ad7f115c0cd8f4b8a9c94f55325c17f9302b6a4e41b29c"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<p>This means we can compare hashes and be confident we are looking at the same file (<code>git</code> does a lot of this)</p>
</div>
</section>
<section id="run-it-again-sam" class="slide level2 smaller">
<h2>Run it again, Sam</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="fu">orderly_run</span>(<span class="st">"example"</span>)</span>
<span id="cb17-2"><a></a><span class="do">## ℹ Starting packet 'example' `20241023-074719-752c6978` at 2024-10-23 07:47:19.462132</span></span>
<span id="cb17-3"><a></a><span class="do">## &gt; d &lt;- data.frame(greeting = "hello", to = "world")</span></span>
<span id="cb17-4"><a></a><span class="do">## &gt; write.csv(d, "hello.csv", row.names = FALSE)</span></span>
<span id="cb17-5"><a></a><span class="do">## ✔ Finished running 'example.R'</span></span>
<span id="cb17-6"><a></a><span class="do">## ℹ Finished 20241023-074719-752c6978 at 2024-10-23 07:47:19.494556 (0.03242469 secs)</span></span>
<span id="cb17-7"><a></a><span class="do">## [1] "20241023-074719-752c6978"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>We have a new id with the new copy</li>
</ul>
</section>
<section id="a-copy-saved-every-time-we-run" class="slide level2 smaller">
<h2>A copy saved every time we run</h2>
<p>Stop naming files <code>data_final-rgf (2).csv</code>, please</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a>fs<span class="sc">::</span><span class="fu">dir_tree</span>(<span class="st">"workdir/part1"</span>)</span>
<span id="cb18-2"><a></a><span class="do">## workdir/part1</span></span>
<span id="cb18-3"><a></a><span class="do">## ├── archive</span></span>
<span id="cb18-4"><a></a><span class="do">## │   └── example</span></span>
<span id="cb18-5"><a></a><span class="do">## │       ├── 20241023-074719-5042592d</span></span>
<span id="cb18-6"><a></a><span class="do">## │       │   ├── example.R</span></span>
<span id="cb18-7"><a></a><span class="do">## │       │   └── hello.csv</span></span>
<span id="cb18-8"><a></a><span class="do">## │       └── 20241023-074719-752c6978</span></span>
<span id="cb18-9"><a></a><span class="do">## │           ├── example.R</span></span>
<span id="cb18-10"><a></a><span class="do">## │           └── hello.csv</span></span>
<span id="cb18-11"><a></a><span class="do">## ├── draft</span></span>
<span id="cb18-12"><a></a><span class="do">## │   └── example</span></span>
<span id="cb18-13"><a></a><span class="do">## ├── orderly_config.yml</span></span>
<span id="cb18-14"><a></a><span class="do">## └── src</span></span>
<span id="cb18-15"><a></a><span class="do">##     └── example</span></span>
<span id="cb18-16"><a></a><span class="do">##         └── example.R</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="a-high-level-overview-of-of-packets" class="slide level2">
<h2>A high-level overview of of packets:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a><span class="fu">orderly_metadata_extract</span>()</span>
<span id="cb19-2"><a></a><span class="do">##                         id    name parameters</span></span>
<span id="cb19-3"><a></a><span class="do">## 1 20241023-074719-5042592d example           </span></span>
<span id="cb19-4"><a></a><span class="do">## 2 20241023-074719-752c6978 example</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>(more on this later).</p>
</section></section>
<section>
<section id="part-2-orderly-code" class="title-slide slide level1 center" data-background="#43464B">
<h1>Part 2: orderly code</h1>

</section>
<section id="what-can-i-do" class="slide level2">
<h2>What can I do?</h2>
<ul>
<li>orderly code is any code you can use from R</li>
<li>Use (almost) any package, any sort of file</li>
</ul>
<p>But…</p>
<ul>
<li>The directory above your file <strong>does not exist</strong></li>
<li>Don’t use absolute paths or <code>../</code> path fragments</li>
<li>You can add metadata to help future you/others</li>
</ul>
</section>
<section id="a-clean-beginning" class="slide level2">
<h2>A clean beginning</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="fu">orderly_init</span>(<span class="st">"workdir/part2"</span>)</span>
<span id="cb20-2"><a></a><span class="do">## ✔ Created orderly root at '/home/runner/work/orderly-tutorial/orderly-tutorial/workdir/part2'</span></span>
<span id="cb20-3"><a></a><span class="do">## ✔ Wrote '.gitignore'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Suppose we’re working on a data analysis pipeline, starting with “incoming data”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a><span class="fu">orderly_new</span>(<span class="st">"incoming"</span>)</span>
<span id="cb21-2"><a></a><span class="do">## ✔ Created 'src/incoming/incoming.R'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Our setup:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a>fs<span class="sc">::</span><span class="fu">dir_tree</span>(<span class="st">"workdir/part2"</span>)</span>
<span id="cb22-2"><a></a><span class="do">## workdir/part2</span></span>
<span id="cb22-3"><a></a><span class="do">## ├── orderly_config.yml</span></span>
<span id="cb22-4"><a></a><span class="do">## └── src</span></span>
<span id="cb22-5"><a></a><span class="do">##     └── incoming</span></span>
<span id="cb22-6"><a></a><span class="do">##         └── incoming.R</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="incoming-data" class="slide level2 smaller">
<h2>Incoming data</h2>
<p>I’ve copied some data in as <code>data.xlsx</code> into <code>src/incoming</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a>fs<span class="sc">::</span><span class="fu">dir_tree</span>(<span class="st">"workdir/part2"</span>)</span>
<span id="cb23-2"><a></a><span class="do">## workdir/part2</span></span>
<span id="cb23-3"><a></a><span class="do">## ├── orderly_config.yml</span></span>
<span id="cb23-4"><a></a><span class="do">## └── src</span></span>
<span id="cb23-5"><a></a><span class="do">##     └── incoming</span></span>
<span id="cb23-6"><a></a><span class="do">##         ├── data.xlsx</span></span>
<span id="cb23-7"><a></a><span class="do">##         └── incoming.R</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Modify <code>incoming.R</code> to tidy that up for consumption using your favourite packages.</li>
<li>Set your working directory to <code>src/incoming</code> and just edit things as usual</li>
<li>Which sheet contains the data?</li>
<li>Where is the data in that sheet?</li>
<li>Do you like those column names?</li>
<li>How about that date format?</li>
</ul>
</section>
<section id="incoming-data-cleaned" class="slide level2">
<h2>Incoming data, cleaned</h2>
<p>My attempt at cleaning:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a>d <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"data.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">2</span>, <span class="at">skip =</span> <span class="dv">2</span>)</span>
<span id="cb24-2"><a></a><span class="fu">names</span>(d) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, <span class="fu">tolower</span>(<span class="fu">names</span>(d)))</span>
<span id="cb24-3"><a></a>d<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(d<span class="sc">$</span>date)</span>
<span id="cb24-4"><a></a><span class="fu">write.csv</span>(d, <span class="st">"data.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Read in the data</li>
<li>Clean up the names (could have used <code>janitor</code>)</li>
<li>Convert date format</li>
<li>Write as <code>csv</code></li>
</ul>
</section>
<section id="incoming-data-running-things" class="slide level2 smaller">
<h2>Incoming data, running things</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>id <span class="ot">&lt;-</span> <span class="fu">orderly_run</span>(<span class="st">"incoming"</span>)</span>
<span id="cb25-2"><a></a><span class="do">## ℹ Starting packet 'incoming' `20241023-074719-a46c26cc` at 2024-10-23 07:47:19.646878</span></span>
<span id="cb25-3"><a></a><span class="do">## &gt; d &lt;- readxl::read_excel("data.xlsx", sheet = 2, skip = 2)</span></span>
<span id="cb25-4"><a></a><span class="do">## &gt; names(d) &lt;- gsub(" ", "_", tolower(names(d)))</span></span>
<span id="cb25-5"><a></a><span class="do">## &gt; d$date &lt;- as.Date(d$date)</span></span>
<span id="cb25-6"><a></a><span class="do">## &gt; write.csv(d, "data.csv", row.names = FALSE)</span></span>
<span id="cb25-7"><a></a><span class="do">## ✔ Finished running 'incoming.R'</span></span>
<span id="cb25-8"><a></a><span class="do">## ℹ Finished 20241023-074719-a46c26cc at 2024-10-23 07:47:19.678587 (0.03170943 secs)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Our generated metadata:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a><span class="fu">orderly_metadata</span>(id)</span>
<span id="cb26-2"><a></a><span class="do">## $schema_version</span></span>
<span id="cb26-3"><a></a><span class="do">## [1] "0.1.1"</span></span>
<span id="cb26-4"><a></a><span class="do">## </span></span>
<span id="cb26-5"><a></a><span class="do">## $name</span></span>
<span id="cb26-6"><a></a><span class="do">## [1] "incoming"</span></span>
<span id="cb26-7"><a></a><span class="do">## </span></span>
<span id="cb26-8"><a></a><span class="do">## $id</span></span>
<span id="cb26-9"><a></a><span class="do">## [1] "20241023-074719-a46c26cc"</span></span>
<span id="cb26-10"><a></a><span class="do">## </span></span>
<span id="cb26-11"><a></a><span class="do">## $time</span></span>
<span id="cb26-12"><a></a><span class="do">## $time$start</span></span>
<span id="cb26-13"><a></a><span class="do">## [1] "2024-10-23 07:47:19 UTC"</span></span>
<span id="cb26-14"><a></a><span class="do">## </span></span>
<span id="cb26-15"><a></a><span class="do">## $time$end</span></span>
<span id="cb26-16"><a></a><span class="do">## [1] "2024-10-23 07:47:19 UTC"</span></span>
<span id="cb26-17"><a></a><span class="do">## </span></span>
<span id="cb26-18"><a></a><span class="do">## </span></span>
<span id="cb26-19"><a></a><span class="do">## $parameters</span></span>
<span id="cb26-20"><a></a><span class="do">## NULL</span></span>
<span id="cb26-21"><a></a><span class="do">## </span></span>
<span id="cb26-22"><a></a><span class="do">## $files</span></span>
<span id="cb26-23"><a></a><span class="do">##         path  size</span></span>
<span id="cb26-24"><a></a><span class="do">## 1   data.csv   466</span></span>
<span id="cb26-25"><a></a><span class="do">## 2  data.xlsx 10851</span></span>
<span id="cb26-26"><a></a><span class="do">## 3 incoming.R   174</span></span>
<span id="cb26-27"><a></a><span class="do">##                                                                      hash</span></span>
<span id="cb26-28"><a></a><span class="do">## 1 sha256:9117700f079b786812cc20904f4c34f5659f2986a923d2771216551cf378e86f</span></span>
<span id="cb26-29"><a></a><span class="do">## 2 sha256:149445ecc545eb987ecc0d5255a48f21165ee1c9b6b54c84b882ce1fbda066b7</span></span>
<span id="cb26-30"><a></a><span class="do">## 3 sha256:8ce9dc59614d62b39cd4ff8cfba08e48f993a9be6d3c29357118df386bf7688f</span></span>
<span id="cb26-31"><a></a><span class="do">## </span></span>
<span id="cb26-32"><a></a><span class="do">## $depends</span></span>
<span id="cb26-33"><a></a><span class="do">## [1] packet query  files </span></span>
<span id="cb26-34"><a></a><span class="do">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span id="cb26-35"><a></a><span class="do">## </span></span>
<span id="cb26-36"><a></a><span class="do">## $git</span></span>
<span id="cb26-37"><a></a><span class="do">## $git$sha</span></span>
<span id="cb26-38"><a></a><span class="do">## [1] "c6f469f362fd925206fad90a6749d5f9beaa6f02"</span></span>
<span id="cb26-39"><a></a><span class="do">## </span></span>
<span id="cb26-40"><a></a><span class="do">## $git$branch</span></span>
<span id="cb26-41"><a></a><span class="do">## [1] "main"</span></span>
<span id="cb26-42"><a></a><span class="do">## </span></span>
<span id="cb26-43"><a></a><span class="do">## $git$url</span></span>
<span id="cb26-44"><a></a><span class="do">## [1] "https://github.com/mrc-ide/orderly-tutorial"</span></span>
<span id="cb26-45"><a></a><span class="do">## </span></span>
<span id="cb26-46"><a></a><span class="do">## </span></span>
<span id="cb26-47"><a></a><span class="do">## $custom</span></span>
<span id="cb26-48"><a></a><span class="do">## $custom$orderly</span></span>
<span id="cb26-49"><a></a><span class="do">## $custom$orderly$artefacts</span></span>
<span id="cb26-50"><a></a><span class="do">## [1] description paths      </span></span>
<span id="cb26-51"><a></a><span class="do">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span id="cb26-52"><a></a><span class="do">## </span></span>
<span id="cb26-53"><a></a><span class="do">## $custom$orderly$role</span></span>
<span id="cb26-54"><a></a><span class="do">##         path    role</span></span>
<span id="cb26-55"><a></a><span class="do">## 1 incoming.R orderly</span></span>
<span id="cb26-56"><a></a><span class="do">## </span></span>
<span id="cb26-57"><a></a><span class="do">## $custom$orderly$description</span></span>
<span id="cb26-58"><a></a><span class="do">## $custom$orderly$description$display</span></span>
<span id="cb26-59"><a></a><span class="do">## NULL</span></span>
<span id="cb26-60"><a></a><span class="do">## </span></span>
<span id="cb26-61"><a></a><span class="do">## $custom$orderly$description$long</span></span>
<span id="cb26-62"><a></a><span class="do">## NULL</span></span>
<span id="cb26-63"><a></a><span class="do">## </span></span>
<span id="cb26-64"><a></a><span class="do">## $custom$orderly$description$custom</span></span>
<span id="cb26-65"><a></a><span class="do">## NULL</span></span>
<span id="cb26-66"><a></a><span class="do">## </span></span>
<span id="cb26-67"><a></a><span class="do">## </span></span>
<span id="cb26-68"><a></a><span class="do">## $custom$orderly$shared</span></span>
<span id="cb26-69"><a></a><span class="do">## [1] here  there</span></span>
<span id="cb26-70"><a></a><span class="do">## &lt;0 rows&gt; (or 0-length row.names)</span></span>
<span id="cb26-71"><a></a><span class="do">## </span></span>
<span id="cb26-72"><a></a><span class="do">## $custom$orderly$session</span></span>
<span id="cb26-73"><a></a><span class="do">## $custom$orderly$session$platform</span></span>
<span id="cb26-74"><a></a><span class="do">## $custom$orderly$session$platform$version</span></span>
<span id="cb26-75"><a></a><span class="do">## [1] "R version 4.4.1 (2024-06-14)"</span></span>
<span id="cb26-76"><a></a><span class="do">## </span></span>
<span id="cb26-77"><a></a><span class="do">## $custom$orderly$session$platform$os</span></span>
<span id="cb26-78"><a></a><span class="do">## [1] "Ubuntu 22.04.5 LTS"</span></span>
<span id="cb26-79"><a></a><span class="do">## </span></span>
<span id="cb26-80"><a></a><span class="do">## $custom$orderly$session$platform$system</span></span>
<span id="cb26-81"><a></a><span class="do">## [1] "x86_64, linux-gnu"</span></span>
<span id="cb26-82"><a></a><span class="do">## </span></span>
<span id="cb26-83"><a></a><span class="do">## </span></span>
<span id="cb26-84"><a></a><span class="do">## $custom$orderly$session$packages</span></span>
<span id="cb26-85"><a></a><span class="do">##        package version attached</span></span>
<span id="cb26-86"><a></a><span class="do">## 1     orderly2 1.99.48     TRUE</span></span>
<span id="cb26-87"><a></a><span class="do">## 2        vctrs   0.6.5    FALSE</span></span>
<span id="cb26-88"><a></a><span class="do">## 3          cli   3.6.3    FALSE</span></span>
<span id="cb26-89"><a></a><span class="do">## 4        knitr    1.48    FALSE</span></span>
<span id="cb26-90"><a></a><span class="do">## 5        rlang   1.1.4    FALSE</span></span>
<span id="cb26-91"><a></a><span class="do">## 6         xfun    0.48    FALSE</span></span>
<span id="cb26-92"><a></a><span class="do">## 7     jsonlite   1.8.9    FALSE</span></span>
<span id="cb26-93"><a></a><span class="do">## 8         glue   1.8.0    FALSE</span></span>
<span id="cb26-94"><a></a><span class="do">## 9      openssl   2.2.2    FALSE</span></span>
<span id="cb26-95"><a></a><span class="do">## 10     askpass   1.2.1    FALSE</span></span>
<span id="cb26-96"><a></a><span class="do">## 11   htmltools 0.5.8.1    FALSE</span></span>
<span id="cb26-97"><a></a><span class="do">## 12         sys   3.4.3    FALSE</span></span>
<span id="cb26-98"><a></a><span class="do">## 13      readxl   1.4.3    FALSE</span></span>
<span id="cb26-99"><a></a><span class="do">## 14       fansi   1.0.6    FALSE</span></span>
<span id="cb26-100"><a></a><span class="do">## 15   rmarkdown    2.28    FALSE</span></span>
<span id="cb26-101"><a></a><span class="do">## 16  cellranger   1.1.0    FALSE</span></span>
<span id="cb26-102"><a></a><span class="do">## 17    evaluate   1.0.1    FALSE</span></span>
<span id="cb26-103"><a></a><span class="do">## 18      tibble   3.2.1    FALSE</span></span>
<span id="cb26-104"><a></a><span class="do">## 19     fastmap   1.2.0    FALSE</span></span>
<span id="cb26-105"><a></a><span class="do">## 20        yaml  2.3.10    FALSE</span></span>
<span id="cb26-106"><a></a><span class="do">## 21   lifecycle   1.0.4    FALSE</span></span>
<span id="cb26-107"><a></a><span class="do">## 22    compiler   4.4.1    FALSE</span></span>
<span id="cb26-108"><a></a><span class="do">## 23          fs   1.6.4    FALSE</span></span>
<span id="cb26-109"><a></a><span class="do">## 24   pkgconfig   2.0.3    FALSE</span></span>
<span id="cb26-110"><a></a><span class="do">## 25      digest  0.6.37    FALSE</span></span>
<span id="cb26-111"><a></a><span class="do">## 26        gert   2.1.4    FALSE</span></span>
<span id="cb26-112"><a></a><span class="do">## 27          R6   2.5.1    FALSE</span></span>
<span id="cb26-113"><a></a><span class="do">## 28        utf8   1.2.4    FALSE</span></span>
<span id="cb26-114"><a></a><span class="do">## 29      pillar   1.9.0    FALSE</span></span>
<span id="cb26-115"><a></a><span class="do">## 30 credentials   2.0.2    FALSE</span></span>
<span id="cb26-116"><a></a><span class="do">## 31    magrittr   2.0.3    FALSE</span></span>
<span id="cb26-117"><a></a><span class="do">## 32       withr   3.0.1    FALSE</span></span>
<span id="cb26-118"><a></a><span class="do">## 33       tools   4.4.1    FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="resources" class="slide level2">
<h2>“Resources”</h2>
<ul>
<li>Any file that is an <strong>input</strong></li>
<li>For example:
<ul>
<li>Scripts that you <code>source()</code></li>
<li>R Markdown files for <code>knitr</code> or <code>rmarkdown</code></li>
<li>Data files (<code>.csv</code>, <code>.xlsx</code>, etc)</li>
<li>Plain text files (<code>README.md</code>, licence info, etc)</li>
</ul></li>
<li>Here, <code>data.xlsx</code> is an input</li>
</ul>
</section>
<section id="telling-orderly-about-resources" class="slide level2 smaller">
<h2>Telling orderly about resources</h2>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a><span class="fu">orderly_resource</span>(<span class="st">"data.xlsx"</span>)</span>
<span id="cb27-2"><a></a>d <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"data.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">2</span>, <span class="at">skip =</span> <span class="dv">2</span>)</span>
<span id="cb27-3"><a></a><span class="fu">names</span>(d) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, <span class="fu">tolower</span>(<span class="fu">names</span>(d)))</span>
<span id="cb27-4"><a></a>d<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(d<span class="sc">$</span>date)</span>
<span id="cb27-5"><a></a><span class="fu">write.csv</span>(d, <span class="st">"data.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment">
<ul>
<li>Tells orderly <code>data.xlsx</code> is a <strong>resource</strong></li>
<li>Fail early if resource not found</li>
<li>Error if resource is modified</li>
<li>Extra metadata, advertising what files <strong>were used</strong></li>
</ul>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a>id <span class="ot">&lt;-</span> <span class="fu">orderly_run</span>(<span class="st">"incoming"</span>)</span>
<span id="cb28-2"><a></a><span class="do">## ℹ Starting packet 'incoming' `20241023-074719-bbb08e35` at 2024-10-23 07:47:19.737755</span></span>
<span id="cb28-3"><a></a><span class="do">## &gt; orderly_resource("data.xlsx")</span></span>
<span id="cb28-4"><a></a><span class="do">## &gt; d &lt;- readxl::read_excel("data.xlsx", sheet = 2, skip = 2)</span></span>
<span id="cb28-5"><a></a><span class="do">## &gt; names(d) &lt;- gsub(" ", "_", tolower(names(d)))</span></span>
<span id="cb28-6"><a></a><span class="do">## &gt; d$date &lt;- as.Date(d$date)</span></span>
<span id="cb28-7"><a></a><span class="do">## &gt; write.csv(d, "data.csv", row.names = FALSE)</span></span>
<span id="cb28-8"><a></a><span class="do">## ✔ Finished running 'incoming.R'</span></span>
<span id="cb28-9"><a></a><span class="do">## ℹ Finished 20241023-074719-bbb08e35 at 2024-10-23 07:47:19.764167 (0.02641225 secs)</span></span>
<span id="cb28-10"><a></a><span class="fu">orderly_metadata</span>(id)<span class="sc">$</span>custom<span class="sc">$</span>orderly<span class="sc">$</span>role</span>
<span id="cb28-11"><a></a><span class="do">##         path     role</span></span>
<span id="cb28-12"><a></a><span class="do">## 1 incoming.R  orderly</span></span>
<span id="cb28-13"><a></a><span class="do">## 2  data.xlsx resource</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="artefacts" class="slide level2">
<h2>“Artefacts”</h2>
<ul>
<li>Any file that is an <strong>output</strong></li>
<li>For example:
<ul>
<li>Datasets you generate</li>
<li>html or pdf output from <code>knitr</code> or <code>rmarkdown</code></li>
<li>Plain text files</li>
<li>Inputs themselves, sometimes</li>
</ul></li>
<li>Here, <code>data.csv</code> is an artefact</li>
</ul>
</section>
<section id="telling-orderly-about-artefacts" class="slide level2 smaller">
<h2>Telling orderly about artefacts</h2>
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a><span class="fu">orderly_resource</span>(<span class="st">"data.xlsx"</span>)</span>
<span id="cb29-2"><a></a><span class="fu">orderly_artefact</span>(<span class="at">files =</span> <span class="st">"data.csv"</span>, <span class="at">description =</span> <span class="st">"Cleaned data"</span>)</span>
<span id="cb29-3"><a></a>d <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"data.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">2</span>, <span class="at">skip =</span> <span class="dv">2</span>)</span>
<span id="cb29-4"><a></a><span class="fu">names</span>(d) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, <span class="fu">tolower</span>(<span class="fu">names</span>(d)))</span>
<span id="cb29-5"><a></a>d<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(d<span class="sc">$</span>date)</span>
<span id="cb29-6"><a></a><span class="fu">write.csv</span>(d, <span class="st">"data.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment">
<ul>
<li>Tells orderly <code>csv.xlsx</code> is an <strong>artefact</strong></li>
<li>Fail if artefact not produced</li>
<li>Extra metadata, advertising what files <strong>were produced</strong></li>
</ul>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a>id <span class="ot">&lt;-</span> <span class="fu">orderly_run</span>(<span class="st">"incoming"</span>)</span>
<span id="cb30-2"><a></a><span class="do">## ℹ Starting packet 'incoming' `20241023-074719-cf0bc2a0` at 2024-10-23 07:47:19.813293</span></span>
<span id="cb30-3"><a></a><span class="do">## &gt; orderly_resource("data.xlsx")</span></span>
<span id="cb30-4"><a></a><span class="do">## &gt; orderly_artefact(files = "data.csv", description = "Cleaned data")</span></span>
<span id="cb30-5"><a></a><span class="do">## &gt; d &lt;- readxl::read_excel("data.xlsx", sheet = 2, skip = 2)</span></span>
<span id="cb30-6"><a></a><span class="do">## &gt; names(d) &lt;- gsub(" ", "_", tolower(names(d)))</span></span>
<span id="cb30-7"><a></a><span class="do">## &gt; d$date &lt;- as.Date(d$date)</span></span>
<span id="cb30-8"><a></a><span class="do">## &gt; write.csv(d, "data.csv", row.names = FALSE)</span></span>
<span id="cb30-9"><a></a><span class="do">## ✔ Finished running 'incoming.R'</span></span>
<span id="cb30-10"><a></a><span class="do">## ℹ Finished 20241023-074719-cf0bc2a0 at 2024-10-23 07:47:19.844239 (0.03094578 secs)</span></span>
<span id="cb30-11"><a></a><span class="fu">orderly_metadata</span>(id)<span class="sc">$</span>custom<span class="sc">$</span>orderly<span class="sc">$</span>artefacts</span>
<span id="cb30-12"><a></a><span class="do">##    description    paths</span></span>
<span id="cb30-13"><a></a><span class="do">## 1 Cleaned data data.csv</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="more-metadata" class="slide level2 smaller">
<h2>More metadata</h2>
<div class="sourceCode" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a><span class="fu">orderly_description</span>(</span>
<span id="cb31-2"><a></a>  <span class="at">display =</span> <span class="st">"Incoming data from Otherlandia"</span>,</span>
<span id="cb31-3"><a></a>  <span class="at">long =</span> <span class="st">"Data as given to us from the MoH in Otherlandia."</span>,</span>
<span id="cb31-4"><a></a>  <span class="at">custom =</span> <span class="fu">list</span>(<span class="at">received =</span> <span class="st">"2024-10-22"</span>))</span>
<span id="cb31-5"><a></a><span class="fu">orderly_resource</span>(<span class="st">"data.xlsx"</span>)</span>
<span id="cb31-6"><a></a><span class="fu">orderly_artefact</span>(<span class="at">files =</span> <span class="st">"data.csv"</span>, <span class="at">description =</span> <span class="st">"Cleaned data"</span>)</span>
<span id="cb31-7"><a></a>d <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"data.xlsx"</span>, <span class="at">sheet =</span> <span class="dv">2</span>, <span class="at">skip =</span> <span class="dv">2</span>)</span>
<span id="cb31-8"><a></a><span class="fu">names</span>(d) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, <span class="fu">tolower</span>(<span class="fu">names</span>(d)))</span>
<span id="cb31-9"><a></a>d<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(d<span class="sc">$</span>date)</span>
<span id="cb31-10"><a></a><span class="fu">write.csv</span>(d, <span class="st">"data.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Running this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a>id <span class="ot">&lt;-</span> <span class="fu">orderly_run</span>(<span class="st">"incoming"</span>, <span class="at">echo =</span> <span class="cn">FALSE</span>)</span>
<span id="cb32-2"><a></a><span class="do">## ℹ Starting packet 'incoming' `20241023-074719-e393a4e3` at 2024-10-23 07:47:19.893583</span></span>
<span id="cb32-3"><a></a><span class="do">## ✔ Finished running 'incoming.R'</span></span>
<span id="cb32-4"><a></a><span class="do">## ℹ Finished 20241023-074719-e393a4e3 at 2024-10-23 07:47:19.920295 (0.02671218 secs)</span></span>
<span id="cb32-5"><a></a><span class="fu">orderly_metadata</span>(id)<span class="sc">$</span>custom<span class="sc">$</span>orderly<span class="sc">$</span>description</span>
<span id="cb32-6"><a></a><span class="do">## $display</span></span>
<span id="cb32-7"><a></a><span class="do">## [1] "Incoming data from Otherlandia"</span></span>
<span id="cb32-8"><a></a><span class="do">## </span></span>
<span id="cb32-9"><a></a><span class="do">## $long</span></span>
<span id="cb32-10"><a></a><span class="do">## [1] "Data as given to us from the MoH in Otherlandia."</span></span>
<span id="cb32-11"><a></a><span class="do">## </span></span>
<span id="cb32-12"><a></a><span class="do">## $custom</span></span>
<span id="cb32-13"><a></a><span class="do">## $custom$received</span></span>
<span id="cb32-14"><a></a><span class="do">## [1] "2024-10-22"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dependencies" class="slide level2">
<h2>Dependencies</h2>
<ul>
<li>This is really the point of orderly</li>
<li>You can pull in any file from any previously run packet</li>
<li>You can use queries to select packets to depend on</li>
</ul>
<p><strong>Our aim</strong>: We want to use <code>data.csv</code> in some analysis</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a><span class="fu">orderly_new</span>(<span class="st">"analysis"</span>)</span>
<span id="cb33-2"><a></a><span class="do">## ✔ Created 'src/analysis/analysis.R'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="setting-up-a-dependency" class="slide level2">
<h2>Setting up a dependency</h2>
<div class="sourceCode" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a><span class="fu">orderly_dependency</span>(<span class="st">"incoming"</span>, <span class="st">"latest"</span>, <span class="st">"data.csv"</span>)</span>
<span id="cb34-2"><a></a><span class="fu">orderly_artefact</span>(<span class="at">files =</span> <span class="fu">c</span>(<span class="st">"coverage-gf.png"</span>, <span class="st">"coverage-bf.png"</span>),</span>
<span id="cb34-3"><a></a>                 <span class="at">description =</span> <span class="st">"Plots of coverage"</span>)</span>
<span id="cb34-4"><a></a></span>
<span id="cb34-5"><a></a>d <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data.csv"</span>)</span>
<span id="cb34-6"><a></a>d<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(d<span class="sc">$</span>date)</span>
<span id="cb34-7"><a></a></span>
<span id="cb34-8"><a></a><span class="fu">png</span>(<span class="st">"coverage-gf.png"</span>)</span>
<span id="cb34-9"><a></a><span class="fu">plot</span>(gf_coverage <span class="sc">~</span> date, d, <span class="at">type =</span> <span class="st">"l"</span>)</span>
<span id="cb34-10"><a></a><span class="fu">dev.off</span>()</span>
<span id="cb34-11"><a></a></span>
<span id="cb34-12"><a></a><span class="fu">png</span>(<span class="st">"coverage-bf.png"</span>)</span>
<span id="cb34-13"><a></a><span class="fu">plot</span>(bf_coverage <span class="sc">~</span> date, d, <span class="at">type =</span> <span class="st">"l"</span>)</span>
<span id="cb34-14"><a></a><span class="fu">dev.off</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is the only file within our analysis directory:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a>fs<span class="sc">::</span><span class="fu">dir_tree</span>(<span class="st">"workdir/part2/src/analysis"</span>)</span>
<span id="cb35-2"><a></a><span class="do">## workdir/part2/src/analysis</span></span>
<span id="cb35-3"><a></a><span class="do">## └── analysis.R</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="running-the-report" class="slide level2 smaller">
<h2>Running the report</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a>id <span class="ot">&lt;-</span> <span class="fu">orderly_run</span>(<span class="st">"analysis"</span>)</span>
<span id="cb36-2"><a></a><span class="do">## ℹ Starting packet 'analysis' `20241023-074719-fca3dc27` at 2024-10-23 07:47:19.991456</span></span>
<span id="cb36-3"><a></a><span class="do">## &gt; orderly_dependency("incoming", "latest", "data.csv")</span></span>
<span id="cb36-4"><a></a><span class="do">## ℹ Depending on incoming @ `20241023-074719-e393a4e3` (via latest(name == "incoming"))</span></span>
<span id="cb36-5"><a></a><span class="do">## &gt; orderly_artefact(files = c("coverage-gf.png", "coverage-bf.png"),</span></span>
<span id="cb36-6"><a></a><span class="do">## +                  description = "Plots of coverage")</span></span>
<span id="cb36-7"><a></a><span class="do">## &gt; d &lt;- read.csv("data.csv")</span></span>
<span id="cb36-8"><a></a><span class="do">## &gt; d$date &lt;- as.Date(d$date)</span></span>
<span id="cb36-9"><a></a><span class="do">## &gt; png("coverage-gf.png")</span></span>
<span id="cb36-10"><a></a><span class="do">## &gt; plot(gf_coverage ~ date, d, type = "l")</span></span>
<span id="cb36-11"><a></a><span class="do">## &gt; dev.off()</span></span>
<span id="cb36-12"><a></a><span class="do">## png </span></span>
<span id="cb36-13"><a></a><span class="do">##   2 </span></span>
<span id="cb36-14"><a></a><span class="do">## &gt; png("coverage-bf.png")</span></span>
<span id="cb36-15"><a></a><span class="do">## &gt; plot(bf_coverage ~ date, d, type = "l")</span></span>
<span id="cb36-16"><a></a><span class="do">## &gt; dev.off()</span></span>
<span id="cb36-17"><a></a><span class="do">## png </span></span>
<span id="cb36-18"><a></a><span class="do">##   2</span></span>
<span id="cb36-19"><a></a><span class="do">## ✔ Finished running 'analysis.R'</span></span>
<span id="cb36-20"><a></a><span class="do">## ℹ Finished 20241023-074719-fca3dc27 at 2024-10-23 07:47:20.083316 (0.09186029 secs)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-aftermath" class="slide level2 smaller">
<h2>The aftermath</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a></a>fs<span class="sc">::</span><span class="fu">dir_tree</span>(<span class="st">"workdir/part2"</span>)</span>
<span id="cb37-2"><a></a><span class="do">## workdir/part2</span></span>
<span id="cb37-3"><a></a><span class="do">## ├── archive</span></span>
<span id="cb37-4"><a></a><span class="do">## │   ├── analysis</span></span>
<span id="cb37-5"><a></a><span class="do">## │   │   └── 20241023-074719-fca3dc27</span></span>
<span id="cb37-6"><a></a><span class="do">## │   │       ├── analysis.R</span></span>
<span id="cb37-7"><a></a><span class="do">## │   │       ├── coverage-bf.png</span></span>
<span id="cb37-8"><a></a><span class="do">## │   │       ├── coverage-gf.png</span></span>
<span id="cb37-9"><a></a><span class="do">## │   │       └── data.csv</span></span>
<span id="cb37-10"><a></a><span class="do">## │   └── incoming</span></span>
<span id="cb37-11"><a></a><span class="do">## │       ├── 20241023-074719-a46c26cc</span></span>
<span id="cb37-12"><a></a><span class="do">## │       │   ├── data.csv</span></span>
<span id="cb37-13"><a></a><span class="do">## │       │   ├── data.xlsx</span></span>
<span id="cb37-14"><a></a><span class="do">## │       │   └── incoming.R</span></span>
<span id="cb37-15"><a></a><span class="do">## │       ├── 20241023-074719-bbb08e35</span></span>
<span id="cb37-16"><a></a><span class="do">## │       │   ├── data.csv</span></span>
<span id="cb37-17"><a></a><span class="do">## │       │   ├── data.xlsx</span></span>
<span id="cb37-18"><a></a><span class="do">## │       │   └── incoming.R</span></span>
<span id="cb37-19"><a></a><span class="do">## │       ├── 20241023-074719-cf0bc2a0</span></span>
<span id="cb37-20"><a></a><span class="do">## │       │   ├── data.csv</span></span>
<span id="cb37-21"><a></a><span class="do">## │       │   ├── data.xlsx</span></span>
<span id="cb37-22"><a></a><span class="do">## │       │   └── incoming.R</span></span>
<span id="cb37-23"><a></a><span class="do">## │       └── 20241023-074719-e393a4e3</span></span>
<span id="cb37-24"><a></a><span class="do">## │           ├── data.csv</span></span>
<span id="cb37-25"><a></a><span class="do">## │           ├── data.xlsx</span></span>
<span id="cb37-26"><a></a><span class="do">## │           └── incoming.R</span></span>
<span id="cb37-27"><a></a><span class="do">## ├── draft</span></span>
<span id="cb37-28"><a></a><span class="do">## │   ├── analysis</span></span>
<span id="cb37-29"><a></a><span class="do">## │   └── incoming</span></span>
<span id="cb37-30"><a></a><span class="do">## ├── orderly_config.yml</span></span>
<span id="cb37-31"><a></a><span class="do">## └── src</span></span>
<span id="cb37-32"><a></a><span class="do">##     ├── analysis</span></span>
<span id="cb37-33"><a></a><span class="do">##     │   └── analysis.R</span></span>
<span id="cb37-34"><a></a><span class="do">##     └── incoming</span></span>
<span id="cb37-35"><a></a><span class="do">##         ├── data.xlsx</span></span>
<span id="cb37-36"><a></a><span class="do">##         └── incoming.R</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="some-comments-on-this" class="slide level2">
<h2>Some comments on this</h2>
<ul>
<li>The <code>data.csv</code> file has been copied from the final copy of <code>incoming</code> into <code>analysis</code></li>
<li>The dependency system works interactively too (try it!)</li>
<li>The logs indicate how dependency resolution occurred</li>
<li>Metadata about the dependencies is included:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a><span class="fu">orderly_metadata</span>(id)<span class="sc">$</span>depends</span>
<span id="cb38-2"><a></a><span class="do">##                     packet                      query        files</span></span>
<span id="cb38-3"><a></a><span class="do">## 1 20241023-074719-e393a4e3 latest(name == "incoming") data.csv....</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="using-specific-versions" class="slide level2">
<h2>Using specific versions</h2>
<div class="sourceCode" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a></a><span class="fu">orderly_dependency</span>(<span class="st">"incoming"</span>, <span class="st">"20241023-074719-bbb08e35"</span>, <span class="st">"data.csv"</span>)</span>
<span id="cb39-2"><a></a><span class="fu">orderly_artefact</span>(<span class="at">files =</span> <span class="fu">c</span>(<span class="st">"coverage-gf.png"</span>, <span class="st">"coverage-bf.png"</span>),</span>
<span id="cb39-3"><a></a>                 <span class="at">description =</span> <span class="st">"Plots of coverage"</span>)</span>
<span id="cb39-4"><a></a></span>
<span id="cb39-5"><a></a>d <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data.csv"</span>)</span>
<span id="cb39-6"><a></a>d<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(d<span class="sc">$</span>date)</span>
<span id="cb39-7"><a></a></span>
<span id="cb39-8"><a></a><span class="fu">png</span>(<span class="st">"coverage-gf.png"</span>)</span>
<span id="cb39-9"><a></a><span class="fu">plot</span>(gf_coverage <span class="sc">~</span> date, d, <span class="at">type =</span> <span class="st">"l"</span>)</span>
<span id="cb39-10"><a></a><span class="fu">dev.off</span>()</span>
<span id="cb39-11"><a></a></span>
<span id="cb39-12"><a></a><span class="fu">png</span>(<span class="st">"coverage-bf.png"</span>)</span>
<span id="cb39-13"><a></a><span class="fu">plot</span>(bf_coverage <span class="sc">~</span> date, d, <span class="at">type =</span> <span class="st">"l"</span>)</span>
<span id="cb39-14"><a></a><span class="fu">dev.off</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="running-this" class="slide level2 smaller">
<h2>Running this</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a>id <span class="ot">&lt;-</span> <span class="fu">orderly_run</span>(<span class="st">"analysis"</span>)</span>
<span id="cb40-2"><a></a><span class="do">## ℹ Starting packet 'analysis' `20241023-074720-27b9baf4` at 2024-10-23 07:47:20.159643</span></span>
<span id="cb40-3"><a></a><span class="do">## &gt; orderly_dependency("incoming", "20241023-074719-bbb08e35", "data.csv")</span></span>
<span id="cb40-4"><a></a><span class="do">## ℹ Depending on incoming @ `20241023-074719-bbb08e35` (via single(id == "20241023-074719-bbb08e35" &amp;&amp; name == "incoming"))</span></span>
<span id="cb40-5"><a></a><span class="do">## &gt; orderly_artefact(files = c("coverage-gf.png", "coverage-bf.png"),</span></span>
<span id="cb40-6"><a></a><span class="do">## +                  description = "Plots of coverage")</span></span>
<span id="cb40-7"><a></a><span class="do">## &gt; d &lt;- read.csv("data.csv")</span></span>
<span id="cb40-8"><a></a><span class="do">## &gt; d$date &lt;- as.Date(d$date)</span></span>
<span id="cb40-9"><a></a><span class="do">## &gt; png("coverage-gf.png")</span></span>
<span id="cb40-10"><a></a><span class="do">## &gt; plot(gf_coverage ~ date, d, type = "l")</span></span>
<span id="cb40-11"><a></a><span class="do">## &gt; dev.off()</span></span>
<span id="cb40-12"><a></a><span class="do">## png </span></span>
<span id="cb40-13"><a></a><span class="do">##   2 </span></span>
<span id="cb40-14"><a></a><span class="do">## &gt; png("coverage-bf.png")</span></span>
<span id="cb40-15"><a></a><span class="do">## &gt; plot(bf_coverage ~ date, d, type = "l")</span></span>
<span id="cb40-16"><a></a><span class="do">## &gt; dev.off()</span></span>
<span id="cb40-17"><a></a><span class="do">## png </span></span>
<span id="cb40-18"><a></a><span class="do">##   2</span></span>
<span id="cb40-19"><a></a><span class="do">## ✔ Finished running 'analysis.R'</span></span>
<span id="cb40-20"><a></a><span class="do">## ℹ Finished 20241023-074720-27b9baf4 at 2024-10-23 07:47:20.215387 (0.05574393 secs)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>with metadata</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a><span class="fu">orderly_metadata</span>(id)<span class="sc">$</span>depends</span>
<span id="cb41-2"><a></a><span class="do">##                     packet</span></span>
<span id="cb41-3"><a></a><span class="do">## 1 20241023-074719-bbb08e35</span></span>
<span id="cb41-4"><a></a><span class="do">##                                                            query        files</span></span>
<span id="cb41-5"><a></a><span class="do">## 1 single(id == "20241023-074719-bbb08e35" &amp;&amp; name == "incoming") data.csv....</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="part-3-collaboration" class="title-slide slide level1 center" data-background="#43464B">
<h1>Part 3: Collaboration</h1>

</section>
<section id="working-with-other-people" class="slide level2">
<h2>Working with other people</h2>
<ul>
<li>Where do you store your code?</li>
<li>Where do you store your data?</li>
<li>Where do you store your outputs?</li>
<li>How will things change over time?</li>
<li>Is it sensitive?</li>
</ul>
</section>
<section id="the-setup-1" class="slide level2">
<h2>The setup</h2>
<p>Here we ignore the git side for now and focus on sharing outputs</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a><span class="fu">getwd</span>()</span>
<span id="cb42-2"><a></a><span class="do">## [1] "/home/runner/work/orderly-tutorial/orderly-tutorial"</span></span>
<span id="cb42-3"><a></a><span class="fu">orderly_init</span>(<span class="st">"workdir/part3"</span>)</span>
<span id="cb42-4"><a></a><span class="do">## ✔ Created orderly root at '/home/runner/work/orderly-tutorial/orderly-tutorial/workdir/part3'</span></span>
<span id="cb42-5"><a></a><span class="do">## ✔ Wrote '.gitignore'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Thom Rawson has kindly set up a bunch of case data for us to use. He’s put it in an orderly root that we can use as <strong>an orderly location</strong>.</p>
</section>
<section id="the-sausage-factory" class="slide level2">
<h2>The sausage factory</h2>
<p>We’ll hide this in the final build</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a><span class="fu">local</span>({</span>
<span id="cb43-2"><a></a>  path_upstream <span class="ot">&lt;-</span> <span class="st">"workdir/part3-upstream"</span></span>
<span id="cb43-3"><a></a>  <span class="fu">orderly_init</span>(path_upstream)</span>
<span id="cb43-4"><a></a>  <span class="fu">orderly_init</span>(path_upstream)</span>
<span id="cb43-5"><a></a>  <span class="fu">orderly_new</span>(<span class="st">"cases"</span>, <span class="at">root =</span> path_upstream)</span>
<span id="cb43-6"><a></a>  fs<span class="sc">::</span><span class="fu">file_copy</span>(<span class="st">"inputs/part3/cases.R"</span>,</span>
<span id="cb43-7"><a></a>                <span class="fu">file.path</span>(path_upstream, <span class="st">"src/cases/cases.R"</span>),</span>
<span id="cb43-8"><a></a>                <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-9"><a></a>  re <span class="ot">&lt;-</span> <span class="st">"^(.+)-2020</span><span class="sc">\\</span><span class="st">.csv$"</span></span>
<span id="cb43-10"><a></a>  files <span class="ot">&lt;-</span> <span class="fu">dir</span>(<span class="st">"inputs/part3/cases"</span>, re)</span>
<span id="cb43-11"><a></a>  regions <span class="ot">&lt;-</span> <span class="fu">sub</span>(re, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>, files)</span>
<span id="cb43-12"><a></a>  <span class="fu">names</span>(files) <span class="ot">&lt;-</span> regions</span>
<span id="cb43-13"><a></a>  <span class="cf">for</span> (region <span class="cf">in</span> regions) {</span>
<span id="cb43-14"><a></a>    fs<span class="sc">::</span><span class="fu">file_copy</span>(<span class="fu">file.path</span>(<span class="st">"inputs/part3/cases"</span>, files[[region]]),</span>
<span id="cb43-15"><a></a>                  <span class="fu">file.path</span>(path_upstream, <span class="st">"src/cases/cases.csv"</span>),</span>
<span id="cb43-16"><a></a>                  <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-17"><a></a>    <span class="fu">orderly_run</span>(<span class="st">"cases"</span>, <span class="fu">list</span>(<span class="at">region =</span> region, <span class="at">year =</span> <span class="dv">2020</span>), <span class="at">root =</span> path_upstream)</span>
<span id="cb43-18"><a></a>  }</span>
<span id="cb43-19"><a></a>})</span>
<span id="cb43-20"><a></a><span class="do">## ✔ Created orderly root at '/home/runner/work/orderly-tutorial/orderly-tutorial/workdir/part3-upstream'</span></span>
<span id="cb43-21"><a></a><span class="do">## ✔ Wrote '.gitignore'</span></span>
<span id="cb43-22"><a></a><span class="do">## ✔ Created 'src/cases/cases.R'</span></span>
<span id="cb43-23"><a></a><span class="do">## ℹ Starting packet 'cases' `20241023-074720-562a1556` at 2024-10-23 07:47:20.347022</span></span>
<span id="cb43-24"><a></a><span class="do">## ℹ Parameters:</span></span>
<span id="cb43-25"><a></a><span class="do">## • region: east_of_england</span></span>
<span id="cb43-26"><a></a><span class="do">## • year: 2020</span></span>
<span id="cb43-27"><a></a><span class="do">## &gt; orderly_parameters(region = NULL, year = NULL)</span></span>
<span id="cb43-28"><a></a><span class="do">## &gt; orderly_resource(files = "cases.csv")</span></span>
<span id="cb43-29"><a></a><span class="do">## &gt; orderly_artefact(files = "cases.csv", description = "Case data")</span></span>
<span id="cb43-30"><a></a><span class="do">## ✔ Finished running 'cases.R'</span></span>
<span id="cb43-31"><a></a><span class="do">## ℹ Finished 20241023-074720-562a1556 at 2024-10-23 07:47:20.38153 (0.03450727 secs)</span></span>
<span id="cb43-32"><a></a><span class="do">## ℹ Starting packet 'cases' `20241023-074720-67c51964` at 2024-10-23 07:47:20.411574</span></span>
<span id="cb43-33"><a></a><span class="do">## ℹ Parameters:</span></span>
<span id="cb43-34"><a></a><span class="do">## • region: london</span></span>
<span id="cb43-35"><a></a><span class="do">## • year: 2020</span></span>
<span id="cb43-36"><a></a><span class="do">## &gt; orderly_parameters(region = NULL, year = NULL)</span></span>
<span id="cb43-37"><a></a><span class="do">## &gt; orderly_resource(files = "cases.csv")</span></span>
<span id="cb43-38"><a></a><span class="do">## &gt; orderly_artefact(files = "cases.csv", description = "Case data")</span></span>
<span id="cb43-39"><a></a><span class="do">## ✔ Finished running 'cases.R'</span></span>
<span id="cb43-40"><a></a><span class="do">## ℹ Finished 20241023-074720-67c51964 at 2024-10-23 07:47:20.443204 (0.03163028 secs)</span></span>
<span id="cb43-41"><a></a><span class="do">## ℹ Starting packet 'cases' `20241023-074720-79050123` at 2024-10-23 07:47:20.479728</span></span>
<span id="cb43-42"><a></a><span class="do">## ℹ Parameters:</span></span>
<span id="cb43-43"><a></a><span class="do">## • region: midlands</span></span>
<span id="cb43-44"><a></a><span class="do">## • year: 2020</span></span>
<span id="cb43-45"><a></a><span class="do">## &gt; orderly_parameters(region = NULL, year = NULL)</span></span>
<span id="cb43-46"><a></a><span class="do">## &gt; orderly_resource(files = "cases.csv")</span></span>
<span id="cb43-47"><a></a><span class="do">## &gt; orderly_artefact(files = "cases.csv", description = "Case data")</span></span>
<span id="cb43-48"><a></a><span class="do">## ✔ Finished running 'cases.R'</span></span>
<span id="cb43-49"><a></a><span class="do">## ℹ Finished 20241023-074720-79050123 at 2024-10-23 07:47:20.511881 (0.03215313 secs)</span></span>
<span id="cb43-50"><a></a><span class="do">## ℹ Starting packet 'cases' `20241023-074720-89dc11be` at 2024-10-23 07:47:20.544771</span></span>
<span id="cb43-51"><a></a><span class="do">## ℹ Parameters:</span></span>
<span id="cb43-52"><a></a><span class="do">## • region: north_east_and_yorkshire</span></span>
<span id="cb43-53"><a></a><span class="do">## • year: 2020</span></span>
<span id="cb43-54"><a></a><span class="do">## &gt; orderly_parameters(region = NULL, year = NULL)</span></span>
<span id="cb43-55"><a></a><span class="do">## &gt; orderly_resource(files = "cases.csv")</span></span>
<span id="cb43-56"><a></a><span class="do">## &gt; orderly_artefact(files = "cases.csv", description = "Case data")</span></span>
<span id="cb43-57"><a></a><span class="do">## ✔ Finished running 'cases.R'</span></span>
<span id="cb43-58"><a></a><span class="do">## ℹ Finished 20241023-074720-89dc11be at 2024-10-23 07:47:20.580047 (0.0352757 secs)</span></span>
<span id="cb43-59"><a></a><span class="do">## ℹ Starting packet 'cases' `20241023-074720-9af20659` at 2024-10-23 07:47:20.611648</span></span>
<span id="cb43-60"><a></a><span class="do">## ℹ Parameters:</span></span>
<span id="cb43-61"><a></a><span class="do">## • region: north_west</span></span>
<span id="cb43-62"><a></a><span class="do">## • year: 2020</span></span>
<span id="cb43-63"><a></a><span class="do">## &gt; orderly_parameters(region = NULL, year = NULL)</span></span>
<span id="cb43-64"><a></a><span class="do">## &gt; orderly_resource(files = "cases.csv")</span></span>
<span id="cb43-65"><a></a><span class="do">## &gt; orderly_artefact(files = "cases.csv", description = "Case data")</span></span>
<span id="cb43-66"><a></a><span class="do">## ✔ Finished running 'cases.R'</span></span>
<span id="cb43-67"><a></a><span class="do">## ℹ Finished 20241023-074720-9af20659 at 2024-10-23 07:47:20.643338 (0.03169012 secs)</span></span>
<span id="cb43-68"><a></a><span class="do">## ℹ Starting packet 'cases' `20241023-074720-ab86950a` at 2024-10-23 07:47:20.676958</span></span>
<span id="cb43-69"><a></a><span class="do">## ℹ Parameters:</span></span>
<span id="cb43-70"><a></a><span class="do">## • region: south_east</span></span>
<span id="cb43-71"><a></a><span class="do">## • year: 2020</span></span>
<span id="cb43-72"><a></a><span class="do">## &gt; orderly_parameters(region = NULL, year = NULL)</span></span>
<span id="cb43-73"><a></a><span class="do">## &gt; orderly_resource(files = "cases.csv")</span></span>
<span id="cb43-74"><a></a><span class="do">## &gt; orderly_artefact(files = "cases.csv", description = "Case data")</span></span>
<span id="cb43-75"><a></a><span class="do">## ✔ Finished running 'cases.R'</span></span>
<span id="cb43-76"><a></a><span class="do">## ℹ Finished 20241023-074720-ab86950a at 2024-10-23 07:47:20.715482 (0.03852415 secs)</span></span>
<span id="cb43-77"><a></a><span class="do">## ℹ Starting packet 'cases' `20241023-074720-bde9b16f` at 2024-10-23 07:47:20.748124</span></span>
<span id="cb43-78"><a></a><span class="do">## ℹ Parameters:</span></span>
<span id="cb43-79"><a></a><span class="do">## • region: south_west</span></span>
<span id="cb43-80"><a></a><span class="do">## • year: 2020</span></span>
<span id="cb43-81"><a></a><span class="do">## &gt; orderly_parameters(region = NULL, year = NULL)</span></span>
<span id="cb43-82"><a></a><span class="do">## &gt; orderly_resource(files = "cases.csv")</span></span>
<span id="cb43-83"><a></a><span class="do">## &gt; orderly_artefact(files = "cases.csv", description = "Case data")</span></span>
<span id="cb43-84"><a></a><span class="do">## ✔ Finished running 'cases.R'</span></span>
<span id="cb43-85"><a></a><span class="do">## ℹ Finished 20241023-074720-bde9b16f at 2024-10-23 07:47:20.778946 (0.03082228 secs)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="adding-a-location" class="slide level2">
<h2>Adding a location</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a></a><span class="fu">orderly_location_add_path</span>(<span class="st">"thom"</span>, fs<span class="sc">::</span><span class="fu">path_abs</span>(<span class="st">"workdir/part3-upstream"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Here we have used the <code>path</code> location type</li>
<li>We will try this with the <code>packit</code> type in the workshop</li>
<li>Locations are just another orderly root where you can find packets</li>
<li>We use <code>fs::path_abs()</code> for now, for uninteresting reasons</li>
</ul>
</section>
<section id="what-has-thom-been-up-to" class="slide level2">
<h2>What has Thom been up to?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a><span class="fu">orderly_location_pull_metadata</span>()</span>
<span id="cb45-2"><a></a><span class="do">## ℹ Fetching metadata from 1 location: 'thom'</span></span>
<span id="cb45-3"><a></a><span class="do">## ✔ Found 7 packets at 'thom', of which 7 are new</span></span>
<span id="cb45-4"><a></a><span class="fu">orderly_metadata_extract</span>(<span class="at">location =</span> <span class="st">"thom"</span>)</span>
<span id="cb45-5"><a></a><span class="do">##                         id  name   parameters</span></span>
<span id="cb45-6"><a></a><span class="do">## 1 20241023-074720-562a1556 cases east_of_....</span></span>
<span id="cb45-7"><a></a><span class="do">## 2 20241023-074720-67c51964 cases london, 2020</span></span>
<span id="cb45-8"><a></a><span class="do">## 3 20241023-074720-79050123 cases midlands....</span></span>
<span id="cb45-9"><a></a><span class="do">## 4 20241023-074720-89dc11be cases north_ea....</span></span>
<span id="cb45-10"><a></a><span class="do">## 5 20241023-074720-9af20659 cases north_we....</span></span>
<span id="cb45-11"><a></a><span class="do">## 6 20241023-074720-ab86950a cases south_ea....</span></span>
<span id="cb45-12"><a></a><span class="do">## 7 20241023-074720-bde9b16f cases south_we....</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="slightly-easier-to-read-but-harder-to-write" class="slide level2">
<h2>Slightly easier to read, but harder to write</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a></a><span class="fu">orderly_metadata_extract</span>(</span>
<span id="cb46-2"><a></a>  <span class="at">location =</span> <span class="st">"thom"</span>,</span>
<span id="cb46-3"><a></a>  <span class="at">extract =</span> <span class="fu">c</span>(<span class="st">"name"</span>,</span>
<span id="cb46-4"><a></a>              <span class="at">region =</span> <span class="st">"parameters.region is string"</span>,</span>
<span id="cb46-5"><a></a>              <span class="at">year =</span> <span class="st">"parameters.year is number"</span>))</span>
<span id="cb46-6"><a></a><span class="do">##                         id  name                   region year</span></span>
<span id="cb46-7"><a></a><span class="do">## 1 20241023-074720-562a1556 cases          east_of_england 2020</span></span>
<span id="cb46-8"><a></a><span class="do">## 2 20241023-074720-67c51964 cases                   london 2020</span></span>
<span id="cb46-9"><a></a><span class="do">## 3 20241023-074720-79050123 cases                 midlands 2020</span></span>
<span id="cb46-10"><a></a><span class="do">## 4 20241023-074720-89dc11be cases north_east_and_yorkshire 2020</span></span>
<span id="cb46-11"><a></a><span class="do">## 5 20241023-074720-9af20659 cases               north_west 2020</span></span>
<span id="cb46-12"><a></a><span class="do">## 6 20241023-074720-ab86950a cases               south_east 2020</span></span>
<span id="cb46-13"><a></a><span class="do">## 7 20241023-074720-bde9b16f cases               south_west 2020</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="depending-on-this" class="slide level2">
<h2>Depending on this</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a><span class="fu">orderly_new</span>(<span class="st">"analysis"</span>)</span>
<span id="cb47-2"><a></a><span class="do">## ✔ Created 'src/analysis/analysis.R'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And code:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a></a><span class="fu">orderly_dependency</span>(<span class="st">"cases"</span>,</span>
<span id="cb48-2"><a></a>                   <span class="st">'latest(parameter:region == "london")'</span>,</span>
<span id="cb48-3"><a></a>                   <span class="fu">c</span>(<span class="st">"london.csv"</span> <span class="ot">=</span> <span class="st">"cases.csv"</span>))</span>
<span id="cb48-4"><a></a>d <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"london.csv"</span>)</span>
<span id="cb48-5"><a></a><span class="fu">png</span>(<span class="st">"london.png"</span>)</span>
<span id="cb48-6"><a></a><span class="fu">plot</span>(Week_Cases <span class="sc">~</span> Week, d)</span>
<span id="cb48-7"><a></a><span class="fu">dev.off</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="query-syntax" class="slide level2">
<h2>Query syntax</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a></a><span class="fu">orderly_search</span>(<span class="st">"latest"</span>, <span class="at">name =</span> <span class="st">"cases"</span>, <span class="at">location =</span> <span class="st">"thom"</span>)</span>
<span id="cb49-2"><a></a><span class="do">## [1] "20241023-074720-bde9b16f"</span></span>
<span id="cb49-3"><a></a><span class="fu">orderly_search</span>(<span class="st">"latest(parameter:region == 'east_of_england')"</span>, <span class="at">name =</span> <span class="st">"cases"</span>,</span>
<span id="cb49-4"><a></a>               <span class="at">location =</span> <span class="st">"thom"</span>)</span>
<span id="cb49-5"><a></a><span class="do">## [1] "20241023-074720-562a1556"</span></span>
<span id="cb49-6"><a></a><span class="fu">orderly_search</span>(</span>
<span id="cb49-7"><a></a>  <span class="st">"latest(parameter:region == 'london' &amp;&amp; parameter:year == 2020)"</span>,</span>
<span id="cb49-8"><a></a>  <span class="at">name =</span> <span class="st">"cases"</span>,</span>
<span id="cb49-9"><a></a>  <span class="at">location =</span> <span class="st">"thom"</span>)</span>
<span id="cb49-10"><a></a><span class="do">## [1] "20241023-074720-67c51964"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can use this elsewhere:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a></a><span class="fu">orderly_metadata_extract</span>(<span class="st">"parameter:region == 'london'"</span>, <span class="at">location =</span> <span class="st">"thom"</span>)</span>
<span id="cb50-2"><a></a><span class="do">##                         id  name   parameters</span></span>
<span id="cb50-3"><a></a><span class="do">## 1 20241023-074720-67c51964 cases london, 2020</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-files-argument" class="slide level2">
<h2>The files argument</h2>
<div class="sourceCode" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a></a>    <span class="fu">c</span>(<span class="st">"london.csv"</span> <span class="ot">=</span> <span class="st">"cases.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>“Save the file <code>cases.csv</code> as <code>london.csv</code> in the working version”</p>
</section>
<section id="run-the-new-report" class="slide level2">
<h2>Run the new report</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a></a><span class="fu">orderly_run</span>(<span class="st">"analysis"</span>)</span>
<span id="cb52-2"><a></a><span class="do">## ℹ Starting packet 'analysis' `20241023-074720-f4fe1ce6` at 2024-10-23 07:47:20.961586</span></span>
<span id="cb52-3"><a></a><span class="do">## &gt; orderly_dependency("cases",</span></span>
<span id="cb52-4"><a></a><span class="do">## +                    'latest(parameter:region == "london")',</span></span>
<span id="cb52-5"><a></a><span class="do">## +                    c("london.csv" = "cases.csv"))</span></span>
<span id="cb52-6"><a></a><span class="do">## ✖ Error running 'analysis.R'</span></span>
<span id="cb52-7"><a></a><span class="do">## ℹ Finished 20241023-074720-f4fe1ce6 at 2024-10-23 07:47:21.005248 (0.04366183 secs)</span></span>
<span id="cb52-8"><a></a><span class="do">## Error in `orderly_run()`:</span></span>
<span id="cb52-9"><a></a><span class="do">## ! Failed to run report</span></span>
<span id="cb52-10"><a></a><span class="do">## Caused by error in `outpack_packet_use_dependency()`:</span></span>
<span id="cb52-11"><a></a><span class="do">## ! Failed to find packet for query 'latest(parameter:region == "london"</span></span>
<span id="cb52-12"><a></a><span class="do">##   &amp;&amp; name == "cases")'</span></span>
<span id="cb52-13"><a></a><span class="do">## ℹ See 'rlang::last_error()$explanation' for details</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>oh no</p>
</div>
</section>
<section id="using-packets-from-elsewhere" class="slide level2">
<h2>Using packets from elsewhere</h2>
<p>Two options</p>
<ol type="1">
<li>Pull the packet to make it local (<code>orderly_location_pull_packet</code>)</li>
<li>Tell orderly which locations to use</li>
</ol>
</section>
<section id="running-with-location" class="slide level2 smaller">
<h2>Running with location</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a></a>id <span class="ot">&lt;-</span> <span class="fu">orderly_run</span>(<span class="st">"analysis"</span>, <span class="at">location =</span> <span class="st">"thom"</span>) <span class="co"># or allow_remote = TRUE</span></span>
<span id="cb53-2"><a></a><span class="do">## ℹ Starting packet 'analysis' `20241023-074721-0f28013a` at 2024-10-23 07:47:21.063695</span></span>
<span id="cb53-3"><a></a><span class="do">## &gt; orderly_dependency("cases",</span></span>
<span id="cb53-4"><a></a><span class="do">## +                    'latest(parameter:region == "london")',</span></span>
<span id="cb53-5"><a></a><span class="do">## +                    c("london.csv" = "cases.csv"))</span></span>
<span id="cb53-6"><a></a><span class="do">## ℹ Looking for suitable files already on disk</span></span>
<span id="cb53-7"><a></a><span class="do">## ℹ Need to fetch 1 file (669.9 kB) from 1 location</span></span>
<span id="cb53-8"><a></a><span class="do">## ℹ Depending on cases @ `20241023-074720-67c51964` (via latest(parameter:region == "london" &amp;&amp; name == "cases"))</span></span>
<span id="cb53-9"><a></a><span class="do">## &gt; d &lt;- read.csv("london.csv")</span></span>
<span id="cb53-10"><a></a><span class="do">## &gt; png("london.png")</span></span>
<span id="cb53-11"><a></a><span class="do">## &gt; plot(Week_Cases ~ Week, d)</span></span>
<span id="cb53-12"><a></a><span class="do">## &gt; dev.off()</span></span>
<span id="cb53-13"><a></a><span class="do">## png </span></span>
<span id="cb53-14"><a></a><span class="do">##   2</span></span>
<span id="cb53-15"><a></a><span class="do">## ✔ Finished running 'analysis.R'</span></span>
<span id="cb53-16"><a></a><span class="do">## ℹ Finished 20241023-074721-0f28013a at 2024-10-23 07:47:21.178957 (0.115262 secs)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Where dependencies are resolved is a property of <code>orderly_run()</code>, not the source of the report</li>
<li>Files are fetched as we run - only used files are copied</li>
</ul>
</section>
<section id="the-result" class="slide level2">
<h2>The result</h2>

<img data-src="workdir/part3/archive/analysis/20241023-074721-0f28013a/london.png" class="r-stretch"></section>
<section id="include-many-dependencies" class="slide level2">
<h2>Include many dependencies</h2>
</section>
<section id="thom-has-new-data-for-us" class="slide level2">
<h2>Thom has new data for us!</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a></a><span class="fu">orderly_location_pull_metadata</span>()</span>
<span id="cb54-2"><a></a><span class="do">## ℹ Fetching metadata from 1 location: 'thom'</span></span>
<span id="cb54-3"><a></a><span class="do">## ✔ Found 8 packets at 'thom', of which 1 is new</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a></a><span class="fu">orderly_metadata_extract</span>(</span>
<span id="cb55-2"><a></a>  <span class="at">location =</span> <span class="st">"thom"</span>,</span>
<span id="cb55-3"><a></a>  <span class="at">extract =</span> <span class="fu">c</span>(<span class="st">"name"</span>,</span>
<span id="cb55-4"><a></a>              <span class="at">region =</span> <span class="st">"parameters.region is string"</span>,</span>
<span id="cb55-5"><a></a>              <span class="at">year =</span> <span class="st">"parameters.year is number"</span>))</span>
<span id="cb55-6"><a></a><span class="do">##                         id  name                   region year</span></span>
<span id="cb55-7"><a></a><span class="do">## 1 20241023-074720-562a1556 cases          east_of_england 2020</span></span>
<span id="cb55-8"><a></a><span class="do">## 2 20241023-074720-67c51964 cases                   london 2020</span></span>
<span id="cb55-9"><a></a><span class="do">## 3 20241023-074720-79050123 cases                 midlands 2020</span></span>
<span id="cb55-10"><a></a><span class="do">## 4 20241023-074720-89dc11be cases north_east_and_yorkshire 2020</span></span>
<span id="cb55-11"><a></a><span class="do">## 5 20241023-074720-9af20659 cases               north_west 2020</span></span>
<span id="cb55-12"><a></a><span class="do">## 6 20241023-074720-ab86950a cases               south_east 2020</span></span>
<span id="cb55-13"><a></a><span class="do">## 7 20241023-074720-bde9b16f cases               south_west 2020</span></span>
<span id="cb55-14"><a></a><span class="do">## 8 20241023-074721-3ced1c27 cases                   london 2021</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="run-our-analysis-with-this-data" class="slide level2">
<h2>Run our analysis with this data</h2>
<p>This time we try pulling</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a></a><span class="fu">orderly_location_pull_packet</span>(<span class="st">"latest"</span>, <span class="at">name =</span> <span class="st">"cases"</span>, <span class="at">location =</span> <span class="st">"thom"</span>)</span>
<span id="cb56-2"><a></a><span class="do">## ℹ Looking for suitable files already on disk</span></span>
<span id="cb56-3"><a></a><span class="do">## ✔ Found 1 file on disk</span></span>
<span id="cb56-4"><a></a><span class="do">## ℹ Need to fetch 1 file (150 B) from 1 location</span></span>
<span id="cb56-5"><a></a>id <span class="ot">&lt;-</span> <span class="fu">orderly_run</span>(<span class="st">"analysis"</span>)</span>
<span id="cb56-6"><a></a><span class="do">## ℹ Starting packet 'analysis' `20241023-074721-672ddcb4` at 2024-10-23 07:47:21.407465</span></span>
<span id="cb56-7"><a></a><span class="do">## &gt; orderly_dependency("cases",</span></span>
<span id="cb56-8"><a></a><span class="do">## +                    'latest(parameter:region == "london")',</span></span>
<span id="cb56-9"><a></a><span class="do">## +                    c("london.csv" = "cases.csv"))</span></span>
<span id="cb56-10"><a></a><span class="do">## ℹ Depending on cases @ `20241023-074721-3ced1c27` (via latest(parameter:region == "london" &amp;&amp; name == "cases"))</span></span>
<span id="cb56-11"><a></a><span class="do">## &gt; d &lt;- read.csv("london.csv")</span></span>
<span id="cb56-12"><a></a><span class="do">## &gt; png("london.png")</span></span>
<span id="cb56-13"><a></a><span class="do">## &gt; plot(Week_Cases ~ Week, d)</span></span>
<span id="cb56-14"><a></a><span class="do">## &gt; dev.off()</span></span>
<span id="cb56-15"><a></a><span class="do">## png </span></span>
<span id="cb56-16"><a></a><span class="do">##   2</span></span>
<span id="cb56-17"><a></a><span class="do">## ✔ Finished running 'analysis.R'</span></span>
<span id="cb56-18"><a></a><span class="do">## ℹ Finished 20241023-074721-672ddcb4 at 2024-10-23 07:47:21.491953 (0.0844872 secs)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="some-thoughts" class="title-slide slide level1 center" data-background="#43464B">
<h1>Some thoughts</h1>

</section>
<section id="documentation" class="slide level2">
<h2>Documentation</h2>
<p><a href="https://mrc-ide.github.io/orderly2/reference/index.html#from-within-a-running-report" data-preview-link="true">The orderly reference</a></p>
</section></section>
<section id="details-for-writing-reportstasks" class="title-slide slide level1 center">
<h1>Details for writing reports/tasks</h1>
<ul>
<li>Shared resources</li>
<li>Resources</li>
<li>Loops over dependencies</li>
<li>Metadata</li>
</ul>
</section>

<section id="what-is-saved" class="title-slide slide level1 center">
<h1>What is saved?</h1>
<ul>
<li>Information about files you consumed, and produced</li>
</ul>
</section>

<section id="ways-of-collaborating" class="title-slide slide level1 center">
<h1>Ways of collaborating</h1>

</section>

<section>
<section id="assorted-issues" class="title-slide slide level1 center">
<h1>Assorted issues</h1>

</section>
<section id="misc" class="slide level2">
<h2>Misc</h2>
<ul>
<li>How to get data into orderly in the first place
<ul>
<li>git versioned files</li>
<li>git ignored files</li>
<li>files from canonical locations</li>
<li>databases</li>
</ul></li>
<li>Coping with failure</li>
<li>Running knitr/rmarkdown</li>
<li>Getting files out of orderly</li>
</ul>
</section>
<section id="the-right-number-of-packets" class="slide level2">
<h2>The right number of packets</h2>
<ul>
<li>Similar to “how big is a git repo”</li>
<li>Some issues:
<ul>
<li>People fragmenting packets to overcome flakey analysis</li>
<li>Millions of packets, leading to complex and slow queries</li>
<li>Hard to get the right combination of packets</li>
</ul></li>
</ul>
</section>
<section id="the-right-number-of-parameters" class="slide level2">
<h2>The right number of parameters</h2>
<ul>
<li>Too few is too inflexible</li>
<li>Too many</li>
</ul>
</section>
<section id="interaction-with-git" class="slide level2">
<h2>Interaction with git</h2>
<ul>
<li>Don’t save outputs</li>
<li>Save some inputs?</li>
<li>Don’t save secrets</li>
<li>Don’t save locations</li>
</ul>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">

</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>